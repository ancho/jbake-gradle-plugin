plugins {
    id "com.gradle.plugin-publish" version "0.9.4"
    id "com.github.ben-manes.versions" version "0.12.0"
    id "net.nemerosa.versioning" version "1.7.1"
}

apply plugin: 'groovy'
apply plugin: 'idea'
apply from: 'gradle/providedConfiguration.gradle'

repositories {
    jcenter()
}

dependencies {
    compile gradleApi()
    compile 'com.github.zafarkhaja:java-semver:0.9.0'
    provided 'org.jbake:jbake-core:2.4.0'
    testCompile('org.spockframework:spock-core:1.0-groovy-2.4') {
        exclude group:'org.codehaus.groovy'
    }
}

version = "0.2.2"


jar {
    manifest {
        attributes(
            'Built-By': System.properties['user.name'],
            'Created-By': "${System.properties['java.version']} (${System.properties['java.vendor']} ${System.properties['java.vm.version']})".toString(),
            'Build-Date': buildDate,
            'Build-Time': buildTime,
            'Build-Revision': versioning.info.commit,
            'Specification-Title': project.name,
            'Specification-Version': project.version,
            'Specification-Vendor': project.name,
            'Implementation-Title': project.name,
            'Implementation-Version': project.version,
            'Implementation-Vendor': project.name
        )
    }
}

pluginBundle {
    website = 'http://jbake.org/'
    vcsUrl = 'https://github.com/jbake-org/jbake-gradle-plugin'
    description = 'Adds the ability to run JBake directly from a Gradle build'
    tags = ['jbake', 'site-generator']

    plugins {
        jbakePlugin {
            id = 'me.champeau.jbake'
            displayName = 'JBake Gradle Plugin'
        }
    }

    mavenCoordinates {
        groupId = "org.samples.override"
        artifactId = "greeting-plugins"
        version = "1.4"
    }
}
